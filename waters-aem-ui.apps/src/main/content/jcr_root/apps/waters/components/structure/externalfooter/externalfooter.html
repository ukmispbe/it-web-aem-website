<a class="cmp-back-to-top" href="#" title="${'Back To Top' @ i18n}"><img alt="${'Back To Top' @ i18n}" src="/content/dam/waters/brand-assets/icons/up.svg" class="inline-svg"></a>

<div data-sly-use.externalFooter="com.waters.aem.core.components.structure.ExternalFooter"
     class="cmp-external-footer">

    <div class="cmp-external-footer__parsys" data-sly-resource="${'par' @ resourceType='wcm/foundation/components/responsivegrid'}"></div>

    <div class="cmp-external-footer__region-link">
        <a href="${externalFooter.regionLinkItem.link.href}" target="${externalFooter.regionLinkItem.newWindow ? '_blank' : ''}">
            <span>${externalFooter.languageLocation}</span>
            <img class="${externalFooter.svg ? 'inline-svg' : ''}" data-sly-test="${externalFooter.regionLink.linkIcon}" src="${externalFooter.regionLink.linkIcon}"/>
        </a>
    </div>

    <div class="cmp-external-footer__social-links">
        <ul data-sly-test="${externalFooter.socialLinks}">
            <li data-sly-repeat="${externalFooter.socialLinks}" class="cmp-external-footer__social-links__item">
                <a class="cmp-external-footer-share-links__link" href="${item.link.href}" target="_blank">
                    <img class="${externalFooter.svg ? 'inline-svg' : ''}" data-sly-test="${item.linkIcon}" src="${item.linkIcon}"/>
                </a>
            </li>
        </ul>
    </div>

    <div class="container">
        <div class="cmp-external-footer__logo">
            <a href="${externalFooter.logoLink.href}" target="${externalFooter.newWindow ? '_blank' : ''}">
                <img src="${externalFooter.logoImage.fileReference}" alt="${externalFooter.logoAltText}"/>
            </a>
        </div>
        <div class="cmp-external-footer__links">
            <nav data-sly-test="${externalFooter.footerLinks}">
                <a data-sly-repeat="${externalFooter.footerLinks}" href="${item.link.href}" target="${item.newWindow ? '_blank' : ''}">
                    ${item.text}<sly data-sly-use.patterns="/apps/waters/components/content/patterns.html" data-sly-call="${patterns.linkIcon @ linkItem=item}"/>
                </a>
                <a data-sly-test="${externalFooter.cookiesLink}" href="${externalFooter.cookiesLink.href}" target="_blank">${'Cookies' @ i18n}</a>
                <a class="optanon-toggle-display dl_Anchor" href="#">${'Cookie Preferences' @ i18n}</a>
            </nav>
        </div>
        <div class="cmp-external-footer__copyright">
            <p>${externalFooter.copyrightText}</p>
        </div>
    </div>
</div>

<script type="text/javascript" id="datalayer">
    var parsedData = JSON.parse('${externalFooter.dataLayer @ context="unsafe"}');

    if (parsedData.page) {
        parsedData.page.serverName = window.location.hostname;
    }

    window.digitalData = parsedData;

    document.dispatchEvent(new CustomEvent('digitalDataReady', {}));
</script>