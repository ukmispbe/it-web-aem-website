<!--  this anchor has a fix position and will show on the page when the footer is not yet visible during scrolling -->
<a class="cmp-back-to-top" href="#" title="${'Back To Top' @ i18n}"><img alt="${'Back To Top' @ i18n}" src="/content/dam/waters/en/brand-assets/icons/up.svg" class="inline-svg"></a>

<!-- this second anchor has a relative position and will show on the page when the footer is visible during scrolling -->
<a class="cmp-back-to-top--relative" href="#" title="${'Back To Top' @ i18n}"><img alt="${'Back To Top' @ i18n}" src="/content/dam/waters/en/brand-assets/icons/up.svg" class="inline-svg"></a>

<div data-sly-use.footer="com.waters.aem.core.components.structure.Footer" id="footer" class="cmp-footer" data-ecommerce-state="${footer.commerceConfig}">
    <sly data-sly-test.isChinaPage="${footer.chinaPage}"/>
    <div class="container1_wrapper">
        <div class="container1">
            <div class="cmp-footer__linksdiv">
                <div class="cmp-footer__parsys"
                    data-sly-resource="${'par' @ resourceType='wcm/foundation/components/responsivegrid'}"></div>
            </div>
            <div class="cmp-footer__logo">
                <a href="${footer.logoLink.href}" target="${footer.external ? '_blank' : ''}">
                    <img src="${footer.logoImage.fileReference}" alt="${footer.logoAltText}" />
                </a>
            </div>
            <div class="cmp-footer__social-links">
                <div class="social-links-text">${'Follow our channels' @ i18n}</div>
                <ul data-sly-test="${footer.socialLinks}">
                    <li data-sly-repeat="${footer.socialLinks}" class="cmp-footer__social-links__item">
                        <a class="cmp-footer-social-links__link" href="${item.link.href}" target="_blank">
                            <img class="${item.svg ? 'inline-svg' : ''}" data-sly-test="${item.linkIcon}"
                                src="${item.linkIcon}" />
                        </a>
                    </li>
                    <li data-sly-test="${isChinaPage && footer.weChatIcon}"
                        class="cmp-footer__social-links__item cmp-footer__social-links__item--wechat cmp-wechat">
                            <div class="cmp-wechat-container"></div>
                            <script type="application/json" id="wechat-json">
                                {
                                    "chatIcon": "${footer.weChatIcon @ context='unsafe'}",
                                    "closeIcon": "/content/dam/waters/en/brand-assets/icons/close.svg",
                                    "title": "${'关注我们 – 沃特世中国' @ i18n, context='unsafe'}",
                                    "qrCodeImg": "${footer.weChatQrCodeImage.fileReference @ context='unsafe'}",
                                    "text": "${'关注沃特世中国官方微信公众号，了解沃特世中国最新动态，获取最新资讯' @ i18n, context='unsafe'}",
                                    "alt": "${'WeChat QR code' @ i18n, context='unsafe'}"
                                }
                            </script>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container2_wrapper">
        <div class="container2">
            <div class="cmp-footer__copyright">
                <p>${footer.copyrightText}</p>
            </div>
            <div class="cmp-footer__selector ${footer.languagePages.size == 1 ? 'one-link' : ''}">
                <div class="cmp-footer__selector__region">
                    <span>${footer.countryName @ i18n}</span>
                    <img class="inline-svg" src="/content/dam/waters/en/brand-assets/icons/modal.svg"
                         alt="${'Country' @ i18n}" />
                </div>
                <div class="cmp-footer__selector__language ${footer.languagePages.size == 1 ? 'one-link' : ''}">
                    <a href="${footer.languagePages[0].page.href}">${footer.languagePages[0].languageTitle}</a>
                    <div class="cmp-footer__selector__language--options"
                         data-sly-list.languageLink="${footer.languagePages}">
                        <a data-sly-test="${!languageLinkList.first}"
                           href="${languageLink.languageHrefIsocode}">${languageLink.languageTitle} </a>
                    </div>
                </div>
            </div>
            <div class="cmp-footer__links ${isChinaPage ? 'china-legal' : ''}">
                <nav data-sly-test="${footer.footerLinks || isChinaPage}">
                    <a data-sly-repeat="${footer.footerLinks}" href="${item.link.href}"
                        target="${item.external ? '_blank' : ''}">
                        ${item.text}
                        <sly data-sly-use.patterns="/apps/waters/components/content/patterns.html"
                            data-sly-call="${patterns.linkIcon @ linkItem=item}" />
                    </a>
                    <a data-sly-test="${footer.cookiesLink}" href="${footer.cookiesLink.href}">${'Cookies' @ i18n}</a>
                    <a class="optanon-toggle-display dl_Anchor" href="#">${'Cookie Preferences' @ i18n}</a>
                    <div data-sly-test="${isChinaPage}" class="cmp-footer__china-legal">
                        <a href="${footer.sICPLegalLink.href}" class="cmp-footer__china-legal-sICP">
                            <img data-sly-test="${footer.sICPLegalIcon}" src="${footer.sICPLegalIcon}" alt="${'Shanghai ICP Number Legal Icon' @ i18n}" />
                            <span data-sly-test="${footer.sICPNumber}">沪ICP备${footer.sICPNumber}号-2</span>
                        </a>
                        <a href="${footer.bPNSLegalLink.href}" class="cmp-footer__china-legal-bPNS">
                            <img data-sly-test="${footer.bPNSLegalIcon}" src="${footer.bPNSLegalIcon}" alt="${'Beijing Public Network Security Number Legal Icon' @ i18n}"/>
                            <span data-sly-test="${footer.bPNSNumber}">京公网安备 ${footer.bPNSNumber}号</span>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</div>

<div id="country-selector-root"></div>
<div id="modal-root"></div>

<script type="text/javascript" id="datalayer">
    var parsedData = JSON.parse('${footer.dataLayer @ context="unsafe"}');

    if (parsedData.page) {
        parsedData.page.serverName = window.location.hostname;
    }

    window.digitalData = parsedData;

    document.dispatchEvent(new CustomEvent('digitalDataReady', {}));
</script>

<script type="application/json" id="global-translations-json">
    {
        "dismissButton": "${'Dismiss' @ i18n, context='unsafe'}",
        "cancelButton": "${'Cancel' @ i18n, context='unsafe'}",
        "preferredCountryHeading": "${'Select your Preferred Country' @ i18n, context='unsafe'}",
        "changeCountryText": "${'Changing the country you shop from may affect factors including account pricing, shipping options and product availability.' @ i18n, context='unsafe'}",
        "changeCountryNewTabText": "${'Your new country website will open in a new browser tab.' @ i18n, context='unsafe'}",
        "changeCountryNoteText": "${'Note' @ i18n, context='unsafe'}",
        "changeCountryButton": "${'Change Country' @ i18n, context='unsafe'}"
    }
</script>
<script type="application/json" id="country-list-json">
    ${footer.countryPagesJson @ context='unsafe'}
</script>
<script type="application/json" id="commerce-configs-json">
    {
        "locale": "${footer.locale  @ context='scriptString'}",
        "commerceConfig": {
            "disabledIcon": "/content/dam/waters/en/brand-assets/icons/attention.svg",
            "disabledLabel": "${'Disabled' @ i18n, context='text'}",
            "disabledText": "${'Online ordering is not available for your region. Please ' @ i18n, context='text'}",
            "disabledLinkText": "${'contact your sales representative.' @ i18n, context='text'}",
            "disabledHref": "${footer.contactLink.href @ context='unsafe'}",
            "partialDisabledText": "${'Online ordering is not available. Please ' @ i18n, context='text'}",
            "partialDisabledLinkText": "${'contact your sales representative.' @ i18n, context='text'}",
            "partialDisabledHref": "${footer.contactLink.href @ context='unsafe'}"
        },
        "availabilityUrl": "${footer.skuAvailabilityUrl @ context='unsafe'}",
        "pricingUrl": "${footer.skuCustomerPriceUrl @ context='unsafe'}",
        "addToCartUrl": "${footer.addToCartUrl @ context='unsafe'}",
        "countryCode": "${footer.countryCode @ context='scriptString'}",
        "isoCode": "${footer.isoCode @ context='scriptString'}",
        "addToCartLabel": "${'Add to Cart' @ i18n, context='text'}",
        "qtyLabel": "${'Qty' @ i18n, context='scriptString'}",
        "showBreadcrumbs": false,
        "skuInfo": {
            "listPriceLabel": "${'List Price' @ i18n, context='text'}",
            "inStockLabel": "${'In Stock' @ i18n, context='text'}",
            "outOfStockLabel": "${'Out of Stock' @ i18n, context='text'}",
            "orderNowLabel": "${'Order Now' @ i18n, context='text'}",
            "orderSoonLabel": "${'Order Soon' @ i18n, context='text'}",
            "seeAvailabilityLabel": "${'See Availability' @ i18n, context='text'}",
            "shipsByLabel": "${'Ships by {0}' @ format=['{shipByDate}'], i18n, context='text'}",
            "onlyXInStockLabel": "${'Only {0} in stock' @ format=['{quantity}'], i18n, context='text'}",
            "discontinuedLabel": "${'Discontinued' @ i18n, context='text'}",
            "discontinuedNoReplacementCode": "${'The part number you selected is no longer available.' @ i18n, context='text'}",
            "discontinuedWithReplacementWithCode": "${'The part number you selected is no longer available, but there is a replacement. The replacement part number is ' @ i18n, context='text'}",
            "partNumberLabel": "${'SKU:' @ i18n, context='text'}",
            "contactWatersLabel": "${'Contact Waters' @ i18n, context='text'}",
            "contactWatersInfoLabel": "${'For Availability' @ i18n, context='text'}",
            "inStockIcon": "/content/dam/waters/en/brand-assets/icons/success.svg",
            "lowStockIcon": "/content/dam/waters/en/brand-assets/icons/attention.svg",
            "outOfStockIcon": "/content/dam/waters/en/brand-assets/icons/x.svg",
            "refreshIcon": "/content/dam/waters/en/brand-assets/icons/refresh.svg",
            "discontinuedIcon": "/content/dam/waters/en/brand-assets/icons/attention.svg",
            "nextIcon": "/content/dam/waters/en/brand-assets/icons/right.svg",
            "maxAmount": 999
        },
        "modalInfo": {
            "icon": "/content/dam/waters/en/brand-assets/icons/checkmark.svg",
            "closeIcon": "/content/dam/waters/en/brand-assets/icons/close.svg",
            "title": "${'Item Added to Cart' @ i18n, context='text'}",
            "buttons": [
                {
                    "text": "${'View Cart' @ i18n, context='text'}",
                    "action": "${footer.viewCartUrl @ context='unsafe'}"
                },
                {
                    "text": "${'Continue Shopping' @ i18n, context='text'}",
                    "action": "close"
                }
            ]
        },
        "errorInfo": {
            "serviceUnavailable": "${'Service Unavailable' @ i18n, context='text'}",
            "tryAgainLater": "${'Try again later' @ i18n, context='text'}",
            "anErrorHasOccurred": "${'An error has occurred' @ i18n, context='text'}",
            "wereSorry": "${'We\'re sorry, but an error has occurred and your item was not added to the cart. Please try again.' @ i18n, context='unsafe'}"
        }
    }
</script>
